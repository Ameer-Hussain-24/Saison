# 多学期课表管理实现任务

## 任务列表

- [x] 1. 扩展数据模型和数据库





  - 创建 Semester 数据模型
  - 扩展 Course 数据模型添加 semesterId 字段
  - 创建 semester 数据库表
  - 创建数据库迁移脚本
  - 添加索引优化查询性能
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5, 13.1, 13.2, 13.3, 13.4, 13.5_

- [x] 2. 实现 Repository 层


  - 创建 SemesterDao 接口
  - 实现 SemesterRepository 接口和实现类
  - 扩展 CourseRepository 添加学期相关方法
  - 实现学期统计查询方法
  - 实现学期复制功能
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5, 11.1, 11.2, 11.3, 11.4, 11.5, 11.6_

- [x] 3. 实现 ViewModel 层


  - 创建 SemesterViewModel
  - 实现学期列表状态管理
  - 实现当前学期状态管理
  - 实现学期统计数据计算
  - 扩展 CourseViewModel 集成学期功能
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5, 8.1, 8.2, 8.3, 8.4, 8.5_

- [x] 4. 实现学期选择器组件


  - 创建 SemesterSelectorDropdown 组件
  - 实现学期快速切换功能
  - 实现最近使用学期记录
  - 添加"查看所有学期"入口
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 12.1, 12.2, 12.3, 12.4, 12.5_

- [x] 5. 实现学期列表界面


  - 创建 SemesterListScreen
  - 实现学期卡片组件 SemesterCard
  - 实现学期统计信息显示
  - 区分活跃学期和归档学期
  - 添加学期操作菜单
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5, 9.1, 9.2, 9.3, 9.4, 9.5_

- [x] 6. 实现学期创建和编辑


  - 创建 SemesterEditDialog 组件
  - 实现学期名称输入和验证
  - 实现学期日期选择
  - 实现学期周数设置
  - 集成到学期列表界面
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 5.1, 5.2, 5.3, 5.4, 5.5, 5.6_

- [x] 7. 实现学期删除功能

  - 创建删除确认对话框
  - 实现删除验证逻辑
  - 显示课程数量警告
  - 实现级联删除课程
  - 添加删除保护（当前学期、最后一个学期）
  - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6_


- [ ] 8. 实现学期归档功能
  - 添加归档/取消归档操作
  - 实现归档状态视觉区分
  - 在学期选择器中过滤归档学期
  - 添加显示归档学期选项
  - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5_


- [ ] 9. 实现学期复制功能
  - 创建学期复制对话框
  - 实现课程批量复制逻辑
  - 自动生成新学期名称
  - 复制后自动切换到新学期
  - _Requirements: 11.1, 11.2, 11.3, 11.4, 11.5, 11.6_

- [x] 10. 集成到课程表界面


  - 在 CourseScreen 顶部添加学期选择器
  - 更新课程列表过滤逻辑
  - 添加学期管理入口
  - 确保课程操作关联到当前学期
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 8.1, 8.2, 8.3, 8.4, 8.5_


- [ ] 11. 实现默认学期处理
  - 在首次启动时创建默认学期
  - 将现有课程关联到默认学期
  - 实现默认学期标识
  - _Requirements: 10.1, 10.2, 10.3, 10.4, 10.5_


- [ ] 12. 实现数据持久化
  - 使用 DataStore 保存当前学期ID
  - 实现学期访问历史记录
  - 保存最近使用的学期列表
  - _Requirements: 4.5, 12.4_

- [x] 13. 国际化支持



  - 添加学期管理相关字符串资源
  - 支持中文、英文、日文、越南文
  - 确保日期格式本地化
  - _Requirements: 14.1, 14.2, 14.3, 14.4, 14.5_

- [ ] 14. 编写单元测试
  - 测试 SemesterRepository 的 CRUD 操作
  - 测试学期切换逻辑
  - 测试学期复制功能
  - 测试数据迁移脚本
  - _Requirements: 所有需求_

- [ ] 15. UI 测试和优化
  - 测试学期创建、编辑、删除流程
  - 测试学期切换交互
  - 性能优化（大量学期数据）
  - 用户体验优化
  - _Requirements: 所有需求_
